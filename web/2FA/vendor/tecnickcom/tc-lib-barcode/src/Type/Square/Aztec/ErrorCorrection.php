<?php
/* CbPlus */
/*

*/
 namespace Com\Tecnick\Barcode\Type\Square\Aztec; use Com\Tecnick\Barcode\Exception as BarcodeException; class ErrorCorrection { const GF = array(4 => 19, 6 => 67, 8 => 301, 10 => 1033, 12 => 4201); const TSIZE = array(4 => 16, 6 => 64, 8 => 256, 10 => 1024, 12 => 4096); protected $tlog = array(); protected $texp = array(); protected $tsize = 0; public function __construct($wsize) { $this->genTables($wsize); } public function checkwords(array $data, $necc) { $coeff = $this->getCoefficients($data, $necc); return array_pad($coeff, -$necc, 0); } protected function genTables($wsize) { goto sQSdyyfFkWoo; sh1z74yZOZ_3: $idx = 0; goto moWUms9FuZLk; fgltqgNEtlYp: $this->texp[$idx] = $val; goto oaue32w5AJAC; C3Nee2LG8rys: $val ^= $primitive; goto TB0VQ_wG6dvE; iQ3OoCksOYvB: if (!($idx < $this->tsize - 1)) { goto cnTp_a32d_aM; } goto aI_GpyDb28dZ; aI_GpyDb28dZ: $this->tlog[$this->texp[$idx]] = $idx; goto xc77bFUIDy4O; TB0VQ_wG6dvE: $val &= $sizeminusone; goto qzDL5JboNv6E; xc77bFUIDy4O: P6anlU40KfHo: goto wuUQV9UUrJK6; xPe3ELVLx486: if (!($val >= $this->tsize)) { goto AAwQoKeyAwu4; } goto C3Nee2LG8rys; ux8YKTOYNSyq: $primitive = self::GF[$wsize]; goto BLSahRvE9o0G; BLSahRvE9o0G: $val = 1; goto WiEYWFKP3MW1; qzDL5JboNv6E: AAwQoKeyAwu4: goto wr6J4QFEZ5s4; WiEYWFKP3MW1: $sizeminusone = $this->tsize - 1; goto sh1z74yZOZ_3; wr6J4QFEZ5s4: UBsutbUPi9Nd: goto gYw4ebsnZZ1x; g6XLpQg3ecJB: cnTp_a32d_aM: goto ObzcgmsC63sh; v4JE1PB3Yl6G: $this->tlog = array_fill(0, $this->tsize, 0); goto ayOa1_jeY83i; moWUms9FuZLk: Ms2NBpmNbxAF: goto OxlmNa_vdZoR; wuUQV9UUrJK6: $idx++; goto b4fAexKwZie8; soqhnJSeO7Tq: Bdqc81kV62vG: goto iQ3OoCksOYvB; b4fAexKwZie8: goto Bdqc81kV62vG; goto g6XLpQg3ecJB; ayOa1_jeY83i: $this->texp = $this->tlog; goto ux8YKTOYNSyq; OxlmNa_vdZoR: if (!($idx < $this->tsize)) { goto Y2LIfU08C8U4; } goto fgltqgNEtlYp; Q5Ywp816wdll: goto Ms2NBpmNbxAF; goto zal4vB1KC1Q2; zal4vB1KC1Q2: Y2LIfU08C8U4: goto REyYMrW_QmnD; REyYMrW_QmnD: $idx = 0; goto soqhnJSeO7Tq; oaue32w5AJAC: $val <<= 1; goto xPe3ELVLx486; gYw4ebsnZZ1x: $idx++; goto Q5Ywp816wdll; sQSdyyfFkWoo: $this->tsize = self::TSIZE[$wsize]; goto v4JE1PB3Yl6G; ObzcgmsC63sh: } protected function getCoefficients(array $data, $necc) { goto qEHNjMiDFkfe; Y0p9KWnbsRm7: if (!($len >= $deg && $coeff[0] != 0)) { goto H4Wmc5PiloRC; } goto icU2qsIpvEtQ; BhetcFHQddn1: $coeff = $this->multiplyByMonomial($data, 1, $necc); goto OaBG6ZcT8NCa; icU2qsIpvEtQ: $scale = $this->multiply($coeff[0], 1); goto h1UAdvMJprya; mHbWu_dpmfKm: u7tP8d4NDZk4: goto Y0p9KWnbsRm7; e812dY6HN5wZ: $len = count($coeff); goto tW2CpacFe0fB; vqDQGK05za8A: if (!($idx <= $necc)) { goto DpMv9ub0vwhQ; } goto nOfKi2fHQTJS; Z0GkMysD0BC1: $coeff = $this->addOrSubtract($coeff, $largercoeffs); goto e812dY6HN5wZ; QqapaSyW5OJu: return $coeff; goto qSzCweOg8eAo; rPJHI3T7bCCf: wj8n8tCKxB6Z: goto vqDQGK05za8A; nOfKi2fHQTJS: $gen = $this->multiplyCoeff(array(1, $this->texp[$idx]), $gen); goto aUN3kIA84zmM; qEHNjMiDFkfe: $gen = array(1); goto Y37C8Zvnkuyv; TPBEwU01zXCJ: DpMv9ub0vwhQ: goto hUGW79IyNwEU; V4hYB3xjrlNe: H4Wmc5PiloRC: goto QqapaSyW5OJu; Y37C8Zvnkuyv: $idx = 1; goto rPJHI3T7bCCf; OaBG6ZcT8NCa: $len = count($coeff); goto mHbWu_dpmfKm; hUGW79IyNwEU: $deg = $necc + 1; goto BhetcFHQddn1; h1UAdvMJprya: $largercoeffs = $this->multiplyByMonomial($gen, $scale, $len - $deg); goto Z0GkMysD0BC1; PjpjQT3HzzMB: $idx++; goto nEwILM5JDVx6; nEwILM5JDVx6: goto wj8n8tCKxB6Z; goto TPBEwU01zXCJ; tW2CpacFe0fB: goto u7tP8d4NDZk4; goto V4hYB3xjrlNe; aUN3kIA84zmM: YBqWhoE4CDrC: goto PjpjQT3HzzMB; qSzCweOg8eAo: } protected function multiplyCoeff(array $acf, array $bcf) { goto yAmC3G6lbj08; M0MPhYeY01qc: $bid = 0; goto FVhsEbg_QXN4; fF3SOtDHgpGN: $bid++; goto Kkr25tv4VgeG; KWAYpeA0TsCt: eg2gBRF3ziAJ: goto JDU6kyKyjO1I; Kkr25tv4VgeG: goto LdFZSbAoZJXy; goto KWAYpeA0TsCt; tnmuG16pfuaA: DSO0FlIPvYUj: goto T_5NHdoEpMSo; T_5NHdoEpMSo: if (!($aid < $alen)) { goto HZwPTCmMVI4F; } goto M0MPhYeY01qc; Qln5yfNVJNiC: $coeff = array_fill(0, $alen + $blen - 1, 0); goto Gk_idNJzzv4D; wkPGsbbuCaPJ: return $this->trimCoefficients($coeff); goto hLB9HBlSW1cn; bLOKD02y0pe1: $aid++; goto G5ZI1MvWdT3a; JTZp3pg_q8Uq: F2u22Jydx1vA: goto fF3SOtDHgpGN; FVhsEbg_QXN4: LdFZSbAoZJXy: goto BW3VtdcAnrtd; G5ZI1MvWdT3a: goto DSO0FlIPvYUj; goto Vu_SYqu9ffB0; BW3VtdcAnrtd: if (!($bid < $blen)) { goto eg2gBRF3ziAJ; } goto OToCxiq2A9t_; iI_MODJh7hqR: $blen = count($bcf); goto Qln5yfNVJNiC; Vu_SYqu9ffB0: HZwPTCmMVI4F: goto wkPGsbbuCaPJ; yAmC3G6lbj08: $alen = count($acf); goto iI_MODJh7hqR; Gk_idNJzzv4D: $aid = 0; goto tnmuG16pfuaA; JDU6kyKyjO1I: uzL3VQTt7aK1: goto bLOKD02y0pe1; OToCxiq2A9t_: $coeff[$aid + $bid] ^= $this->multiply($acf[$aid], $bcf[$bid]); goto JTZp3pg_q8Uq; hLB9HBlSW1cn: } protected function multiply($aval, $bval) { goto h5jZLmL0E92U; p9vHXcst0Pcb: return $this->texp[($this->tlog[$aval] + $this->tlog[$bval]) % ($this->tsize - 1)]; goto plkqKoiHIrEe; h5jZLmL0E92U: if (!($aval == 0 || $bval == 0)) { goto kJMUShWUnDj2; } goto BKTD9T5FM2OV; FFJ6v1zcrw0V: kJMUShWUnDj2: goto p9vHXcst0Pcb; BKTD9T5FM2OV: return 0; goto FFJ6v1zcrw0V; plkqKoiHIrEe: } protected function trimCoefficients($coeff) { goto pjXyURN93B2W; r8CUOm2d_0Z5: goto KzrNHq6qscsE; goto CCDvHnDI5mxX; CCDvHnDI5mxX: rfFaV8m3Beum: goto vvVeqNbf09WO; MAGJgcN91CKe: if (!(!empty($coeff) && $coeff[0] == 0)) { goto rfFaV8m3Beum; } goto LNR1klm5uehS; pjXyURN93B2W: KzrNHq6qscsE: goto MAGJgcN91CKe; LNR1klm5uehS: array_shift($coeff); goto r8CUOm2d_0Z5; vvVeqNbf09WO: return $coeff; goto XpciG46zBicY; XpciG46zBicY: } protected function multiplyByMonomial(array $coeff, $mon, $deg) { goto it1FLbbxDIsP; rLq95O5GWlqZ: $prod[$idx] = $this->multiply($coeff[$idx], $mon); goto VdHRwijvLz5Z; OpIB9bAlzJpl: goto LH0RHNDPBmvn; goto CmGSUKslFbpL; CmGSUKslFbpL: phnfO9rWbs5v: goto Xq6b0KMYku_G; GUCD4WRSXjIS: LH0RHNDPBmvn: goto Xxdl0EGARhz5; JsmFB0h4RYyN: $idx++; goto OpIB9bAlzJpl; it1FLbbxDIsP: $ncf = count($coeff); goto PbJt5cpQ1FxJ; VdHRwijvLz5Z: XpQRlmPUuNUu: goto JsmFB0h4RYyN; Xq6b0KMYku_G: return $this->trimCoefficients($prod); goto Bn8rGNiTgZa6; F5KfjkPuOEQL: $idx = 0; goto GUCD4WRSXjIS; Xxdl0EGARhz5: if (!($idx < $ncf)) { goto phnfO9rWbs5v; } goto rLq95O5GWlqZ; PbJt5cpQ1FxJ: $prod = array_fill(0, $ncf + $deg, 0); goto F5KfjkPuOEQL; Bn8rGNiTgZa6: } protected function addOrSubtract(array $smaller, array $larger) { goto QzG2Z_4nIgR8; mS1Os2t8mXbd: $idx = $lendiff; goto yWwbH1kgbqRq; LlPptDJXid0O: return $this->trimCoefficients($coeff); goto CAXAUcpd3X1i; qs0YF7YjKJT1: $llen = count($larger); goto AI68NtOvZMyV; odPwMbiKjSqZ: VyCvJQu1qBRt: goto LlPptDJXid0O; AI68NtOvZMyV: $lendiff = $llen - $slen; goto sG0I1gDaQeUq; EZTqlIGrcD0l: $coeff[$idx] = $smaller[$idx - $lendiff] ^ $larger[$idx]; goto oSFBELC4OqhP; Zi2bM0vL8dYe: goto jp1Z6fCbmyX_; goto odPwMbiKjSqZ; oSFBELC4OqhP: QRJ5bgupoCbY: goto Tn0we1rkR9ZJ; sG0I1gDaQeUq: $coeff = array_slice($larger, 0, $lendiff); goto mS1Os2t8mXbd; Tn0we1rkR9ZJ: $idx++; goto Zi2bM0vL8dYe; QzG2Z_4nIgR8: $slen = count($smaller); goto qs0YF7YjKJT1; yWwbH1kgbqRq: jp1Z6fCbmyX_: goto JGhKXK6_WEoJ; JGhKXK6_WEoJ: if (!($idx < $llen)) { goto VyCvJQu1qBRt; } goto EZTqlIGrcD0l; CAXAUcpd3X1i: } }
