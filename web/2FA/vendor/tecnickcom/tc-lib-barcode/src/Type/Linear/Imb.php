<?php
/* CbPlus */
/*

*/
 namespace Com\Tecnick\Barcode\Type\Linear; use Com\Tecnick\Barcode\Exception as BarcodeException; class Imb extends \Com\Tecnick\Barcode\Type\Linear { protected $format = "\111\x4d\102"; const ASC_CHR = array(4, 0, 2, 6, 3, 5, 1, 9, 8, 7, 1, 2, 0, 6, 4, 8, 2, 9, 5, 3, 0, 1, 3, 7, 4, 6, 8, 9, 2, 0, 5, 1, 9, 4, 3, 8, 6, 7, 1, 2, 4, 3, 9, 5, 7, 8, 3, 0, 2, 1, 4, 0, 9, 1, 7, 0, 2, 4, 6, 3, 7, 1, 9, 5, 8); const DSC_CHR = array(7, 1, 9, 5, 8, 0, 2, 4, 6, 3, 5, 8, 9, 7, 3, 0, 6, 1, 7, 4, 6, 8, 9, 2, 5, 1, 7, 5, 4, 3, 8, 7, 6, 0, 2, 5, 4, 9, 3, 0, 1, 6, 8, 2, 0, 4, 5, 9, 6, 7, 5, 2, 6, 3, 8, 5, 1, 9, 8, 7, 4, 0, 2, 6, 3); const ASC_POS = array(3, 0, 8, 11, 1, 12, 8, 11, 10, 6, 4, 12, 2, 7, 9, 6, 7, 9, 2, 8, 4, 0, 12, 7, 10, 9, 0, 7, 10, 5, 7, 9, 6, 8, 2, 12, 1, 4, 2, 0, 1, 5, 4, 6, 12, 1, 0, 9, 4, 7, 5, 10, 2, 6, 9, 11, 2, 12, 6, 7, 5, 11, 0, 3, 2); const DSC_POS = array(2, 10, 12, 5, 9, 1, 5, 4, 3, 9, 11, 5, 10, 1, 6, 3, 4, 1, 10, 0, 2, 11, 8, 6, 1, 12, 3, 8, 6, 4, 4, 11, 0, 6, 1, 9, 11, 5, 3, 7, 3, 10, 7, 11, 8, 2, 10, 3, 5, 8, 0, 3, 12, 11, 8, 4, 5, 1, 3, 0, 7, 12, 9, 8, 10); protected function getReversedUnsignedShort($num) { goto lxQ6Ggxpp9Mi; uwYFABFR8cm7: goto Izuqz32WUxLR; goto kLcEsXhxRnYr; l4tstDKSYH5Y: $rev <<= 1; goto T9TnA3WoM7zS; JGzqaRx259CB: ++$pos; goto uwYFABFR8cm7; T9TnA3WoM7zS: $rev |= $num & 1; goto sYWa_EC2Bjz8; WswZJIuhLAAR: M92pq9zgjqRx: goto JGzqaRx259CB; K75zVmh1HTOb: $pos = 0; goto f9M4ZEVGyZDN; sYWa_EC2Bjz8: $num >>= 1; goto WswZJIuhLAAR; kLcEsXhxRnYr: DH3W5uWedETr: goto ne3rsRH44WLK; ne3rsRH44WLK: return $rev; goto w1n5tC4yF6OO; lxQ6Ggxpp9Mi: $rev = 0; goto K75zVmh1HTOb; mcPICp0GeBU2: if (!($pos < 16)) { goto DH3W5uWedETr; } goto l4tstDKSYH5Y; f9M4ZEVGyZDN: Izuqz32WUxLR: goto mcPICp0GeBU2; w1n5tC4yF6OO: } protected function getFrameCheckSequence($code_arr) { goto Va0VesQPr2zD; x0twYIN4h8Ml: goto cr15vkUIN1pc; goto kwrykOj5lfX6; d1nZrzHoDuv9: $fcs = 0x7ff; goto sHb3S31cTEAr; wlomb6B2MS1V: $fcs = $fcs << 1; goto x0twYIN4h8Ml; FEcJUwKN5ryn: $byte = 1; goto Gcjqo3nj4CBi; Y2Fl2JI2x3Er: $fcs &= 0x7ff; goto qkThVQuBClpr; sHb3S31cTEAr: $data = hexdec($code_arr[0]) << 5; goto vbk8qYoGmIPF; jQm8to5h7ETW: rObNnSvxN2Zr: goto a9huia3xjOnE; XvUkLoAPz0X7: v02BMyjrLCkF: goto VppI_690KgUC; rXpBvBTI00EL: MgCZETtlAP6p: goto mXYuiJV3x4Uz; lGrWhnObshIr: xJapONcp7sao: goto Y2Fl2JI2x3Er; marwOhrHSIW5: IeB866Us5U9C: goto mtLx4L1RG9fS; Va0VesQPr2zD: $genpoly = 0xf35; goto d1nZrzHoDuv9; FiTzugPitYZw: YhKcpHGe0TFC: goto au6XmFEAlMEz; wa6VpE6k1gcq: $fcs &= 0x7ff; goto OjzHeQYjGNPa; cQzbau_31LVp: if (($fcs ^ $data) & 0x400) { goto NUpEWh6CG6yP; } goto wlomb6B2MS1V; V93lEwGVnVwS: if (!($byte < 13)) { goto v02BMyjrLCkF; } goto xtv80iUdfzfk; xtv80iUdfzfk: $data = hexdec($code_arr[$byte]) << 3; goto VdX0_eYkGAz6; Gcjqo3nj4CBi: f5pEPk43NjP2: goto V93lEwGVnVwS; nydqzwP08VCx: $fcs = $fcs << 1 ^ $genpoly; goto lGrWhnObshIr; kwrykOj5lfX6: NUpEWh6CG6yP: goto xhmryXWzYdCD; EQzErTPjLY3B: uf4sWFj99fKU: goto nydqzwP08VCx; VdX0_eYkGAz6: $bit = 0; goto jQm8to5h7ETW; fg4JSgDqGV9B: goto MgCZETtlAP6p; goto hkMdqoRIRbK4; FgwKZv278atT: uNHZuYmvBRnB: goto marwOhrHSIW5; mtLx4L1RG9fS: ++$byte; goto uEYyErUjKBQF; uEYyErUjKBQF: goto f5pEPk43NjP2; goto XvUkLoAPz0X7; vbk8qYoGmIPF: $bit = 2; goto rXpBvBTI00EL; LePEEq0JSLNR: goto rObNnSvxN2Zr; goto FgwKZv278atT; hkMdqoRIRbK4: jmoo7vx_RII4: goto FEcJUwKN5ryn; mXYuiJV3x4Uz: if (!($bit < 8)) { goto jmoo7vx_RII4; } goto o_Vvp4X431xe; V21N9IgDAOPE: $fcs = $fcs << 1; goto jM_NRw4hDr3i; o6o13BYTh9jU: cr15vkUIN1pc: goto wa6VpE6k1gcq; VppI_690KgUC: return $fcs; goto PgykiZtkxlxa; o_Vvp4X431xe: if (($fcs ^ $data) & 0x400) { goto uf4sWFj99fKU; } goto V21N9IgDAOPE; M8ATeE_wzxES: ++$bit; goto fg4JSgDqGV9B; qkThVQuBClpr: $data <<= 1; goto TPJyZM0xi1IW; a9huia3xjOnE: if (!($bit < 8)) { goto uNHZuYmvBRnB; } goto cQzbau_31LVp; TPJyZM0xi1IW: GtZ0QZkK58Ea: goto M8ATeE_wzxES; au6XmFEAlMEz: ++$bit; goto LePEEq0JSLNR; OjzHeQYjGNPa: $data <<= 1; goto FiTzugPitYZw; jM_NRw4hDr3i: goto xJapONcp7sao; goto EQzErTPjLY3B; xhmryXWzYdCD: $fcs = $fcs << 1 ^ $genpoly; goto o6o13BYTh9jU; PgykiZtkxlxa: } protected function getTables($type, $size) { goto JLX0FMZGD68D; KrHK62CkEOS1: $lli = 0; goto v44Yk8uHp6mI; wiZfCklhieXL: --$lui; goto Ii_EE_hCExnm; G_hhHWH88mgE: iHs9tAI_XkEi: goto mNvccEFjlYXZ; wnQfEDsCObfd: goto MKlgRGlZ6WZu; goto ZfXGzM9W11rV; xLEQDkWrMvHK: return $table; goto QMa4olCcihSs; JLX0FMZGD68D: $table = array(); goto KrHK62CkEOS1; XJSbSXp1N5t1: CeYUP5NpSzYj: goto J9DwANBj5Sx6; RMUVZKqjRZsg: goto xfdHAMRMouFS; goto XJSbSXp1N5t1; MihHySEi4jEp: $bit_count += intval(($count & 1 << $bit_index) != 0); goto Bdsz2fXB0t6L; ZfXGzM9W11rV: zywKUJruPGYu: goto xLEQDkWrMvHK; MgQcK974IKNT: CSwkwahTiP3D: goto shPoWLvluwWd; PWzrLlHxFf7j: if (!($bit_index < 13)) { goto CSwkwahTiP3D; } goto MihHySEi4jEp; J9DwANBj5Sx6: $table[$lui] = $count; goto wiZfCklhieXL; U9JpHFhaVBLh: goto N3QV6NHq2NZC; goto MgQcK974IKNT; gBMQkuQ_SO7d: $table[$lli] = $reverse; goto KjO3QWhWAXtB; KLoHk3csxrWD: $bit_count = 0; goto uP_A259ll7Qo; uP_A259ll7Qo: $bit_index = 0; goto F4nXuxMCrrwS; qhXGvw9mDTbI: $reverse = $this->getReversedUnsignedShort($count) >> 3; goto ic3CIj1rdxyV; HKGSW4ZgcodE: $count = 0; goto Zml7UGQg34Gq; Bdsz2fXB0t6L: ymJEZs_0TlXm: goto qMcv6nwL1ILW; F4nXuxMCrrwS: N3QV6NHq2NZC: goto PWzrLlHxFf7j; shPoWLvluwWd: if (!($bit_count == $type)) { goto CY5ZwQZX8zg6; } goto qhXGvw9mDTbI; Ii_EE_hCExnm: xfdHAMRMouFS: goto G_hhHWH88mgE; zmPIRT8T0SbW: aUZDv0SDSLz0: goto X2oI1M2EHesF; Zml7UGQg34Gq: MKlgRGlZ6WZu: goto AmSqY2FLIVar; AmSqY2FLIVar: if (!($count < 8192)) { goto zywKUJruPGYu; } goto KLoHk3csxrWD; KjO3QWhWAXtB: ++$lli; goto RMUVZKqjRZsg; ALIb90i_1327: $table[$lli] = $count; goto p5nzkIlPcrPX; X2oI1M2EHesF: ++$count; goto wnQfEDsCObfd; ic3CIj1rdxyV: if (!($reverse >= $count)) { goto iHs9tAI_XkEi; } goto S8RMrhq6_gj6; mNvccEFjlYXZ: CY5ZwQZX8zg6: goto zmPIRT8T0SbW; S8RMrhq6_gj6: if ($reverse == $count) { goto CeYUP5NpSzYj; } goto ALIb90i_1327; qMcv6nwL1ILW: ++$bit_index; goto U9JpHFhaVBLh; p5nzkIlPcrPX: ++$lli; goto gBMQkuQ_SO7d; v44Yk8uHp6mI: $lui = $size - 1; goto HKGSW4ZgcodE; QMa4olCcihSs: } protected function getRoutingCode($routing_code) { goto YF3fvun8xS8m; nWZTgQ84UvtR: FOx5Tn3TZE1k: goto LDqx10C1N9zg; YF3fvun8xS8m: switch (strlen($routing_code)) { case 0: return "\x30"; case 5: return bcadd($routing_code, "\x31"); case 9: return bcadd($routing_code, "\61\x30\60\60\60\61"); case 11: return bcadd($routing_code, "\x31\x30\60\60\x31\x30\x30\60\60\x31"); } goto nWZTgQ84UvtR; vfH6toWJP51Y: throw new BarcodeException("\111\x6e\x76\x61\154\151\x64\x20\162\x6f\165\x74\151\x6e\x67\x20\x63\x6f\144\145"); goto MtitwSQgro0L; LDqx10C1N9zg: XepOre80kqNE: goto vfH6toWJP51Y; MtitwSQgro0L: } protected function getCharsArray() { goto WIaXtsYhtgn4; C87ALhgK0r5z: $table2of13 = $this->getTables(2, 78); goto wdJ8PvQGbVU6; WVyx5ukw_Ps4: $data = bcdiv($data, "\x36\63\66"); goto OR_cNZDjLRmt; WIaXtsYhtgn4: $this->ncols = 0; goto QOye3N0Z9rBT; wGfhb5bEZQsd: $data = $this->convertHexToDec($binary_code_102bit); goto UwmmXPzLc0Pj; IEuabTRYqnNZ: LTcNKARCAcAm: goto zvU8FGGHvnsQ; mQ3BaZEpI2X9: $binary_code_arr = substr($binary_code_arr, 0, -1); goto l_s7D9OpSRla; QOye3N0Z9rBT: $this->nrows = 3; goto tKc01abjZuW5; INPZqwlNpBxW: $codewords = array(); goto wGfhb5bEZQsd; cAEHfzir6QOm: if (!($fcs >> 10 == 1)) { goto kHNSet7gWrO5; } goto wP748K1CQQwu; gTbc1zUx63wL: $data = bcdiv($data, "\61\63\66\65"); goto IEuabTRYqnNZ; vI2__cHo3SZa: foreach ($codewords as $val) { goto LaPU8197XA83; vcYHmieQUY8e: W9buQjJF13Ug: goto WrHpbYc5GfEo; f7M7h9FEjFhg: if (!(($fcs & $bitmask) > 0)) { goto CG0IvwRMfV7i; } goto Wopt4eNIc9sw; haQIRTpWzluS: $chrcode = $table5of13[$val]; goto EyKHiQ8NkQcE; ZT812W0zNN7A: $chrcode = $table2of13[$val - 1287]; goto zDEerw00gMdV; aRMEiwnmGIiG: $bitmask /= 2; goto vcYHmieQUY8e; LaPU8197XA83: if ($val <= 1286) { goto PZIn4_2g4lDc; } goto ZT812W0zNN7A; EyKHiQ8NkQcE: H2Ab6iBmqm8B: goto f7M7h9FEjFhg; rHbWjaaXhvDf: $characters[] = $chrcode; goto aRMEiwnmGIiG; Wopt4eNIc9sw: $chrcode = ~(int) $chrcode & 8191; goto s3PoAAeU2XSh; ZmgUsFqmlC7m: PZIn4_2g4lDc: goto haQIRTpWzluS; zDEerw00gMdV: goto H2Ab6iBmqm8B; goto ZmgUsFqmlC7m; s3PoAAeU2XSh: CG0IvwRMfV7i: goto rHbWjaaXhvDf; WrHpbYc5GfEo: } goto QuHI54IBih6f; PbgE35EZY9_p: C4f2FncDdaCx: goto BLTcForwAejb; wP748K1CQQwu: $codewords[9] += 659; goto j1pDWskYupg8; jrm8K8w_Jmgy: $binary_code = bcmul($binary_code, "\65"); goto oAaszC_Txybs; xINOY9aiFDz7: $codewords[9] = $data; goto cAEHfzir6QOm; xW3ycKYDG50v: goto C4f2FncDdaCx; goto zcVjcgt_9Kgk; OynKNKldhdIS: $binary_code_102bit = $first_byte . substr($binary_code, 2); goto INPZqwlNpBxW; G_LUu4MU0Ycl: $binary_code = $this->getRoutingCode($code_arr[1]); goto EZ31hOqUuKPH; YVE548ifebTW: $code_arr = explode("\x2d", $this->code); goto IR8fvO6WGuxK; p71ml7OA8WAp: $binary_code = str_pad($binary_code, 26, "\x30", STR_PAD_LEFT); goto z25NL480CLs_; WL2Mc0GCDF99: $binary_code = bcadd($binary_code, $tracking_number[0]); goto jrm8K8w_Jmgy; Vf1yZBJQLLOq: $binary_code .= substr($tracking_number, 2, 18); goto CI6vazrs_fy0; CI6vazrs_fy0: $binary_code = $this->convertDecToHex($binary_code); goto p71ml7OA8WAp; OR_cNZDjLRmt: $pos = 1; goto PbgE35EZY9_p; zvU8FGGHvnsQ: ++$pos; goto xW3ycKYDG50v; QuHI54IBih6f: lGj0UbZiZsqU: goto MzMVE2TTw75x; EZ31hOqUuKPH: IyclB18P1Z4D: goto tWMkynzsLoME; l_s7D9OpSRla: $binary_code_arr = explode("\15", $binary_code_arr); goto OCBUqV4Eoxj0; BLTcForwAejb: if (!($pos < 9)) { goto Ekqqe1J6P9F6; } goto Q9FpEpeDWHME; zny6VutFBCFg: $binary_code = 0; goto hrQKtkLPqj_2; tWMkynzsLoME: $binary_code = bcmul($binary_code, "\61\x30"); goto WL2Mc0GCDF99; j1pDWskYupg8: kHNSet7gWrO5: goto C87ALhgK0r5z; wdJ8PvQGbVU6: $table5of13 = $this->getTables(5, 1287); goto dh63j8ndu8qp; Q9FpEpeDWHME: $codewords[$pos] = bcmod($data, "\61\x33\x36\65"); goto gTbc1zUx63wL; zcVjcgt_9Kgk: Ekqqe1J6P9F6: goto xINOY9aiFDz7; UwmmXPzLc0Pj: $codewords[0] = bcmod($data, "\66\x33\66") * 2; goto WVyx5ukw_Ps4; tKc01abjZuW5: $this->bars = array(); goto YVE548ifebTW; IR8fvO6WGuxK: $tracking_number = $code_arr[0]; goto zny6VutFBCFg; z25NL480CLs_: $binary_code_arr = chunk_split($binary_code, 2, "\xd"); goto mQ3BaZEpI2X9; MzMVE2TTw75x: return array_reverse($characters); goto qVZfMy8SAy4h; dh63j8ndu8qp: $characters = array(); goto TKFvDs2yphJk; oAaszC_Txybs: $binary_code = bcadd($binary_code, $tracking_number[1]); goto Vf1yZBJQLLOq; TKFvDs2yphJk: $bitmask = 512; goto vI2__cHo3SZa; hrQKtkLPqj_2: if (!isset($code_arr[1])) { goto IyclB18P1Z4D; } goto G_LUu4MU0Ycl; OCBUqV4Eoxj0: $fcs = $this->getFrameCheckSequence($binary_code_arr); goto Hr7PzM_kVPj4; Hr7PzM_kVPj4: $first_byte = sprintf("\x25\62\x73", dechex(hexdec($binary_code_arr[0]) << 2 >> 2)); goto OynKNKldhdIS; qVZfMy8SAy4h: } protected function setBars() { goto IGIvjZz9aoup; TLkyB6xdcMvU: dzXRVysXBRU_: goto AJuRAa3c6Q5Q; bUpaptDBpj3H: x_cbcfse7N3B: goto hDMrQEqy5bGo; wJkzd7gxRi1N: goto KuAt1ulmtDAg; goto TLkyB6xdcMvU; PNe1xRB_o9xk: $this->bars[] = array($this->ncols, 0, 1, 2); goto SajBrmImWnnc; QwomQvgUTOkr: $this->bars[] = array($this->ncols, 1, 1, 2); goto ljhZAnOLPuUK; rTfXQnAIVH4f: $this->ncols += 2; goto TKEEtE6tle7w; vyD76FdBo_ei: goto KuAt1ulmtDAg; goto uaETudFO1yZJ; mjlWwuvIXX0y: $pos = 0; goto KbzPcO6jFpZF; orpZ07nBBxB5: if ($asc) { goto lflBg6WVYVDc; } goto Tw5zObIH6Zj6; TKEEtE6tle7w: lP2z3vcrX2DF: goto i_g2zjYxSgc1; IoEcq3LWacOn: if ($asc and $dsc) { goto dzXRVysXBRU_; } goto orpZ07nBBxB5; i_g2zjYxSgc1: ++$pos; goto Uto2V9xTnyVH; KbzPcO6jFpZF: xIZgQpxzceOI: goto UFic_z4x7Unb; gijkww3hBGBa: $dsc = ($chars[self::DSC_CHR[$pos]] & pow(2, self::DSC_POS[$pos])) > 0; goto IoEcq3LWacOn; SajBrmImWnnc: goto KuAt1ulmtDAg; goto SJ0wQYDM8Lhq; ljhZAnOLPuUK: KuAt1ulmtDAg: goto rTfXQnAIVH4f; vYvEJ48a_Shy: $this->bars[] = array($this->ncols, 1, 1, 1); goto wJkzd7gxRi1N; Y7UyfntlJYdX: $asc = ($chars[self::ASC_CHR[$pos]] & pow(2, self::ASC_POS[$pos])) > 0; goto gijkww3hBGBa; Uto2V9xTnyVH: goto xIZgQpxzceOI; goto bUpaptDBpj3H; AJuRAa3c6Q5Q: $this->bars[] = array($this->ncols, 0, 1, 3); goto vyD76FdBo_ei; uaETudFO1yZJ: lflBg6WVYVDc: goto PNe1xRB_o9xk; SJ0wQYDM8Lhq: RC88T0O7i2ty: goto QwomQvgUTOkr; hDMrQEqy5bGo: --$this->ncols; goto Ec2f9Luvn_us; UFic_z4x7Unb: if (!($pos < 65)) { goto x_cbcfse7N3B; } goto Y7UyfntlJYdX; IGIvjZz9aoup: $chars = $this->getCharsArray(); goto mjlWwuvIXX0y; Tw5zObIH6Zj6: if ($dsc) { goto RC88T0O7i2ty; } goto vYvEJ48a_Shy; Ec2f9Luvn_us: } }
